!function(e,t){"use strict";var i=e.module("rcGalleria",[]);i.provider("rcGalleria",[function(){var e="",t="",i={showInfo:!0,_toggleInfo:!1};this.setPath=function(t){e=t},this.setTheme=function(e){t=e},this.setOptions=function(e){i=e},this.$get=function(){return{path:e,theme:t,options:i}}}]),i.directive("rcGalleria",["$timeout","$log","rcGalleria",function(i,a,r){return{restrict:"E",scope:{sources:"=",images:"=",currentIndex:"=",keepSource:"@",src:"@",theme:"@",transition:"@",initialTransition:"@",imageCrop:"@",showImagenav:"@",autoplay:"@",pauseOnInteraction:"@",responsive:"@",initialShowDock:"@",thumbnails:"@",showInfo:"@",toggleInfo:"@",showCounter:"@",clickNext:"@",iFrameTimeoutPoster:"@",iFramePoster:"@",videoPoster:"@"},template:'<div class="galleria" style="height: 100%; width: 100%" data-ng-class="{\'galleria-current-iframe\': currentSource.iframe, \'galleria-current-video\': currentSource.video, \'galleria-current-image\': currentSource.image }"><div data-ng-repeat="source in sources"><a data-ng-if="source.iframe" data-ng-href="{{source.iframe}}"><img data-ng-if="source.thumb" class="iframe" data-ng-src="{{source.thumb}}" data-title="{{source.title}}" data-description="{{source.description}}" alt="{{source.alt}}" /><span data-ng-if="!source.thumb" class="iframe">{{source.title}}</span></a><a data-ng-if="source.video" data-ng-href="{{source.video}}"><img data-ng-if="source.thumb" class="video" data-ng-src="{{source.thumb}}" data-title="{{source.title}}" data-description="{{source.description}}" alt="{{source.alt}}" /><span data-ng-if="!source.thumb" class="video">{{source.title}}</span></a><a data-ng-if="source.image" data-ng-href="{{source.image}}"><img data-ng-src="{{source.thumb}}" data-title="{{source.title}}" data-description="{{source.description}}" alt="{{source.alt}}" data-big="{{source.big_image}}" /></a></div></div>',link:function(n,s,o){var c="";e.isDefined(n.src)&&e.isUndefined(n.theme)?c=n.src:e.isDefined(n.src)&&e.isDefined(n.theme)?c=n.src+"/"+n.theme+"/galleria."+n.theme+".min.js":r.path.length>0&&0===r.theme.length?c=r.path:r.path.length>0&&r.theme.length>0&&(c=r.path+"/"+r.theme+"/galleria."+r.theme+".min.js"),n.iFramePoster="true"===n.iFramePoster,n.iFrameTimeoutPoster=e.isDefined(n.iFrameTimeoutPoster)?parseInt(n.iFrameTimeoutPoster,10):0,n.currentSource={},e.isDefined(n.images)&&e.isUndefined(n.sources)&&(n.sources=n.images),c.length>0&&(console.log(c),Galleria.loadTheme(c));var u,l=s.find(".galleria"),m="true"===n.initialShowDock;i(function(){if(n.currentIndex=e.isDefined(n.currentIndex)?parseInt(n.currentIndex,10):0,n.currentSource=n.sources[n.currentIndex],null!=n.thumbnails)switch(n.thumbnails){case"true":n.thumbnails=!0;break;case"false":n.thumbnails=!1}else n.thumbnails=!0;Galleria.configure(e.extend(r.options,{show:n.currentIndex,keepSource:"true"===n.keepSource,transition:n.transition,initialTransition:n.transition,imageCrop:n.imageCrop,showImagenav:"true"===n.showImagenav,autoplay:!!e.isDefined(n.autoplay)&&parseInt(n.autoplay,10),pauseOnInteraction:"true"===n.pauseOnInteraction,responsive:"true"===n.responsive,thumbnails:n.thumbnails,showInfo:"true"===n.showInfo,_toggleInfo:"true"===n.toggleInfo,showCounter:"true"===n.showCounter,clicknext:"true"===n.clickNext,videoPoster:"true"===n.videoPoster})),Galleria.run(l,{extend:function(){if(u=this,!n.iFramePoster){var e=t('<style type="text/css">.galleria-current-iframe .galleria-stage .galleria-image img { visibility: hidden; }</style>');t("html > head").append(e)}}}),a.debug(Galleria.get());var s=!1;Galleria.ready(function(r){if(a.debug(r),a.debug(this),this._options.swipe&&n.iFrameTimeoutPoster>0){var o=this;this.finger.config.oncomplete=function(i){var a=Math.max(0,Math.min(parseInt(i,10),o.getDataLength()-1)),r=o.getData(a);t(o._thumbnails[a].container).addClass("active").siblings(".active").removeClass("active"),r&&(e.isUndefined(n.currentSource.iframe)&&o.$("images").find(".galleria-frame").css("opacity",0).hide().find("iframe").remove(),o._options.carousel&&o._options.carouselFollow&&o._carousel.follow(a))}}Galleria.on("image",function(a){this===u&&(s||!0!==m||(this.$("thumbnails-tab").click(),s=!0),e.isDefined(n.currentSource.iframe)?i(function(){n.iFrameTimeoutPoster>0&&(t(a.imageTarget).click(),t(a.imageTarget).trigger("mouseup")),n.$emit("rcGalleria.iframe-loaded",a)},n.iFrameTimeoutPoster):n.$emit("rcGalleria.image-loaded",a))}),Galleria.on("loadstart",function(t){this===u&&(n.currentIndex=t.index,n.currentSource=n.sources[n.currentIndex],n.$apply(),e.isDefined(n.currentSource.iframe)?n.$emit("rcGalleria.iframe-load",t):n.$emit("rcGalleria.image-load",t))})})}),n.$on("$destroy",function(){u&&u.destroy&&u.destroy()})}}}])}(angular,jQuery);