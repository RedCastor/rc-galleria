!function(e,a){"use strict";var t=e.module("rcGalleria",[]);t.provider("rcGalleria",[function(){var e,a,t={showInfo:!0,_toggleInfo:!1};this.setPath=function(a){e=a},this.setTheme=function(e){a=e},this.setOptions=function(e){t=e},this.$get=function(){return{path:e,theme:a,options:t}}}]),t.directive("rcGalleria",["$timeout","$log","rcGalleria",function(t,i,r){return{restrict:"E",scope:{sources:"=",images:"=",currentIndex:"=",keepSource:"@",src:"@",theme:"@",transition:"@",initialTransition:"@",imageCrop:"@",showImagenav:"@",autoplay:"@",pauseOnInteraction:"@",responsive:"@",initialShowDock:"@",thumbnails:"@",showInfo:"@",toggleInfo:"@",showCounter:"@",clickNext:"@"},template:'<div class="galleria" style="height: 100%; width: 100%" data-ng-class="{\'galleria-current-iframe\': currentSource.iframe, \'galleria-current-video\': currentSource.video, \'galleria-current-image\': currentSource.image }"><div data-ng-repeat="source in sources"><a data-ng-if="source.iframe" data-ng-href="{{source.iframe}}"><img data-ng-if="source.thumb" class="iframe" data-ng-src="{{source.thumb}}" data-title="{{source.title}}" data-description="{{source.description}}" alt="{{source.alt}}" /><span data-ng-if="!source.thumb" class="iframe">{{source.title}}</span></a><a data-ng-if="source.video" data-ng-href="{{source.video}}"><img data-ng-if="source.thumb" class="video" data-ng-src="{{source.thumb}}" data-title="{{source.title}}" data-description="{{source.description}}" alt="{{source.alt}}" /><span data-ng-if="!source.thumb" class="video">{{source.title}}</span></a><a data-ng-if="source.image" data-ng-href="{{source.image}}"><img data-ng-src="{{source.thumb}}" data-title="{{source.title}}" data-description="{{source.description}}" alt="{{source.alt}}" data-big="{{source.big_image}}" /></a></div></div>',link:function(n,s,o){var c="";c=n.src&&e.isUndefined(n.theme)?n.src:e.iDefined(n.src)&&e.isDefined(n.theme)?n.src+"/"+n.theme+"/galleria."+n.theme+".min.js":r.path?r.theme?r.path+"/"+r.theme+"/galleria."+r.theme+".min.js":r.path:"/lib/galleria/themes/classic/galleria.classic.js",n.currentSource={},e.isDefined(n.images)&&e.isUndefined(n.sources)&&(n.sources=n.images),Galleria.loadTheme(c);var u,l=s.find(".galleria"),d="true"===n.initialShowDock;t(function(){if(n.currentIndex=e.isDefined(n.currentIndex)?parseInt(n.currentIndex,10):0,n.currentSource=n.sources[n.currentIndex],null!=n.thumbnails)switch(n.thumbnails){case"true":n.thumbnails=!0;break;case"false":n.thumbnails=!1}else n.thumbnails=!0;Galleria.configure(e.extend(r.options,{show:n.currentIndex,keepSource:"true"===n.keepSource,transition:n.transition,initialTransition:n.transition,imageCrop:n.imageCrop,showImagenav:"true"===n.showImagenav,autoplay:!!e.isDefined(n.autoplay)&&parseInt(n.autoplay,10),pauseOnInteraction:"true"===n.pauseOnInteraction,responsive:"true"===n.responsive,thumbnails:n.thumbnails,showInfo:"true"===n.showInfo,_toggleInfo:"true"===n.toggleInfo,showCounter:"true"===n.showCounter,clicknext:"true"===n.clickNext})),Galleria.run(l,{extend:function(){u=this}}),i.debug(Galleria.get());var s=!1;Galleria.ready(function(i){Galleria.on("image",function(i){s||!0!==d||(this.$("thumbnails-tab").click(),s=!0),n.currentIndex=i.index,n.currentSource=n.sources[n.currentIndex],n.$apply(),n.$emit("galleria.image-loaded",i),(e.isDefined(n.currentSource.iframe)||e.isDefined(n.currentSource.video))&&(n.$emit("galleria.iframe-load",i),t(function(){a(i.imageTarget).mouseup(),n.$emit("galleria.iframe-loaded",i)},700))})})}),n.$on("$destroy",function(){u&&u.destroy&&u.destroy()})}}}])}(angular,jQuery);